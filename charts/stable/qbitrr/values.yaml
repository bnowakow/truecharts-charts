# yaml-language-server: $schema=./values.schema.json
image:
  repository: docker.io/feramance/qbitrr
  pullPolicy: IfNotPresent
  tag: v5.9.0@sha256:f10b6256a478dffe03e84dc00e445dd4d74b7b05bb8349d4c9a41cb0c21eb569
securityContext:
  container:
    readOnlyRootFilesystem: false
    runAsNonRoot: false
    runAsUser: 0
    runAsGroup: 0
service:
  main:
    enabled: false
    ports:
      main:
        enabled: false
workload:
  main:
    podSpec:
      initContainers:
        1-create-config-file:
          type: install
          enabled: true
          imageSelector: "image"
          command:
            - /bin/sh
            - -c
          args:
            - |
              conf="/config/config.toml"
              example="https://raw.githubusercontent.com/Feramance/qBitrr/master/config.example.toml"
              if [ -f "$conf" ]; then
                echo "$conf exists. Skipping..."
              else
                echo "$conf does not exist... Downloading the example from upstream..."
                wget "$example" -O $conf || echo "Failed to download"
              fi
      containers:
        main:
          probes:
            liveness:
              enabled: false
            readiness:
              enabled: false
            startup:
              enabled: false
          env:
            QBITRR_OVERRIDES_DATA_PATH: /config
persistence:
  config:
    enabled: true
    mountPath: /config
    targetSelector:
      main:
        main: {}
        1-create-config-file: {}
  downloads:
    enabled: true
    mountPath: /completed_downloads
